<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      lang="en">
    <link rel="stylesheet" type="text/css" href="../style/DiseñoPlatillo.css"/>
    <h:head>
        <title>SkyFood - Sistema de Ventas</title>
        <f:event listener="#{ VentaC.listarVenta()}" type="preRenderView" />
    </h:head>
    <h:body>

        <!--Menu de las capas-->
        <div class="card">
            <h:form style="margin-bottom: 15px">
                <p:growl id="messages"/>

                <p:menubar>
                    <p:submenu label="Personas" icon="pi pi-users">
                        <p:menuitem value="Empleado" outcome="Empleado" icon="pi pi-shopping-cart"/>
                        <p:menuitem value="Cliente" outcome="Cliente" icon="pi pi-chart-line"/>
                        <p:menuitem value="Proveedor" outcome="Proveedor" icon="pi pi-users"/>
                    </p:submenu>

                    <p:submenu label="Acciones" icon="pi pi-sliders-h">
                        <p:menuitem value="Listado de Venta" outcome="ListarVenta" update="messages" icon="pi pi-refresh"/>
                        <p:menuitem value="Ventas" outcome="Venta" update="messages" icon="pi pi-refresh"/>
                    </p:submenu>

                    <p:submenu label="Carta" icon="pi pi-tags">
                        <p:menuitem value="Platillo" outcome="Platillo" update="messages" icon="pi pi-refresh"/>
                    </p:submenu>

                    <p:divider layout="vertical"/>

                    <!--<p:menuitem value="Quit" icon="pi pi-fw pi-power-off"/>-->

                    <f:facet name="options">
                        <p:button value="Salir" outcome="Intro" icon="pi pi-fw pi-sign-out" styleClass="ui-button-info"/>
                    </f:facet>
                </p:menubar>
            </h:form>
        </div>
        <!--Menu de las capas-->

        <!-- Filtrado por Activo e Inactivo -->

        <p:spacer height="0"/>        
        <!--        Listado del Cliente    >-->              
        <h:form id="frmTablaUsu">
            <p:dataTable id="tablaUsu" var="lista" value="#{VentaC.listadoven}" 
                         rows="10"
                         paginator="true"
                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                         currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
                         rowsPerPageTemplate="10,15,20"
                         emptyMessage="La lista esta sin datos para mostrar, agregue datos porfavor.">   
                <f:facet name="header">

                    <!-- Encabezados de la lista -->
                    <center>
                        <h1 id="ListadoDeCliente">Lista de Ventas Generales</h1>
                    </center>

                    <!-- Encabezados de la lista -->

                    <!-- Botón de Reporte -->
                    <center>
                        <p:commandButton value="Exportar XLS" icon="pi pi-file-excel"
                                         style="margin: 5px; margin-top:10px; background-color: #ff0000; border-color:#ff0000; border-radius: 60px"
                                         ajax="false">
                            <p:dataExporter type="xls" target="tablaUsu" fileName="Ventas Generales" />
                        </p:commandButton>
                        <p:commandButton value="Reporte Ventas Generales" onclick="this.form.target = '_blank'"
                                         style="margin: 5px;margin-top:10px;background-color: #ff0000; border-color:#ff0000; border-radius: 60px"
                                         icon="pi pi-file-pdf" ajax="false"
                                         title="Ventas Generales" actionListener="#{VentaC.ReportePDF()}"/>
                    </center>
                    <!-- Botón de Reporte -->

                </f:facet>
                <div>
                    <p:column headerText="Nro. Venta: " style="width: 30px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.codigoVenta}"/>
                    </p:column>
                    <p:column headerText="Fecha: " style="width: 80px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.fechaVenta}"/>
                    </p:column>
                    <p:column headerText="Nombre Empleado: " style="width: 130px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.nombreEmpleado}"/>
                    </p:column>
                    <p:column headerText="Apellido Empleado: " style="width: 130px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.apellidoEmpleado}"/>
                    </p:column>
                    <p:column headerText="DNI del Empleado: " style="width: 130px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.dniEmpleado}"/>
                    </p:column>
                    <p:column headerText="Nombre Cliente: " style="width: 130px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.nombreCliente}"/>
                    </p:column>
                    <p:column headerText="Apellido Cliente: " style="width: 130px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.apellidoCliente}"/>
                    </p:column>
                    <p:column headerText="DNI Cliente: " style="width: 90px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.dniCliente}"/>
                    </p:column>
                    <p:column headerText="Platillo: " style="width: 150px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.nombrePlatillo}"/>
                    </p:column>
                    <p:column headerText="Cantidad: " style="width: 50px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.cantidaVendida}"/>
                    </p:column>
                    <p:column headerText="Precio: " style="width: 50px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.precioPlatillo}"/>
                    </p:column>
                    <p:column headerText="Subtotal:" style="width: 80px; text-align: center; font-size: 13px">
                        <h:outputText value="#{lista.totalDeVenta}"/>
                    </p:column>
                </div>

                <center>
                    <f:facet name="footer">
                        EN TOTAL HAY #{fn:length(VentaC.listadoven)} REGISTROS EN ESTE APARTADO.
                    </f:facet>
                </center>
            </p:dataTable> 
        </h:form>
        
    </h:body>
    <h:outputScript library="js" name="..//resources/js/spanishLocales.js"/>
</html>
