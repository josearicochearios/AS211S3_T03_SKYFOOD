-- Empezamos a crear todo la Base de Datos en ORACLE DEVELOPER

-- Creamos la tabla UBIGEO

CREATE TABLE UBIGEO (

    CODUBI char(6)  NOT NULL,
    
    DEPAR varchar2(100)  NOT NULL,
    
    PROVI varchar2(100)  NOT NULL,
    
    DISTRI varchar2(100)  NOT NULL,
    
    CONSTRAINT UBIGEO_pk PRIMARY KEY (CODUBI)
    
) ;

-- Ingresamos los registros a la tabla UBIGEO

    INSERT ALL
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150101', 'LIMA', 'LIMA', 'LIMA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150102', 'LIMA', 'LIMA', 'ANCON')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150103', 'LIMA', 'LIMA', 'ATE')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150104', 'LIMA', 'LIMA', 'BARRANCO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150105', 'LIMA', 'LIMA', 'BREÑA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150106', 'LIMA', 'LIMA', 'CARABAYLLO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150107', 'LIMA', 'LIMA', 'CHACLACAYO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150108', 'LIMA', 'LIMA', 'CHORRILLOS')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150109', 'LIMA', 'LIMA', 'CIENEGUILLA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150110', 'LIMA', 'LIMA', 'COMAS')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150111', 'LIMA', 'LIMA', 'EL AGUSTINO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150112', 'LIMA', 'LIMA', 'INDEPENDENCIA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150113', 'LIMA', 'LIMA', 'JESUS MARIA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150114', 'LIMA', 'LIMA', 'LA MOLINA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150115', 'LIMA', 'LIMA', 'LA VICTORIA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150116', 'LIMA', 'LIMA', 'LINCE')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150117', 'LIMA', 'LIMA', 'LOS OLIVOS')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150118', 'LIMA', 'LIMA', 'LURIGANCHO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150119', 'LIMA', 'LIMA', 'LURIN')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150120', 'LIMA', 'LIMA', 'MAGDALENA DEL MAR')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150121', 'LIMA', 'LIMA', 'PUEBLO LIBRE')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150122', 'LIMA', 'LIMA', 'MIRAFLORES')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150123', 'LIMA', 'LIMA', 'PACHACAMAC')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150124', 'LIMA', 'LIMA', 'PUCUSANA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150125', 'LIMA', 'LIMA', 'PUENTE PIEDRA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150126', 'LIMA', 'LIMA', 'PUNTA HERMOSA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150127', 'LIMA', 'LIMA', 'PUNTA NEGRA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150128', 'LIMA', 'LIMA', 'RIMAC')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150129', 'LIMA', 'LIMA', 'SAN BARTOLO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150130', 'LIMA', 'LIMA', 'SAN BORJA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150131', 'LIMA', 'LIMA', 'SAN ISIDRO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150132', 'LIMA', 'LIMA', 'SAN JUAN DE LURIGANCHO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150133', 'LIMA', 'LIMA', 'SAN JUAN DE MIRAFLORES')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150134', 'LIMA', 'LIMA', 'SAN LUIS')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150135', 'LIMA', 'LIMA', 'SAN MARTIN DE PORRES')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150136', 'LIMA', 'LIMA', 'SAN MIGUEL')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150137', 'LIMA', 'LIMA', 'SANTA ANITA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150138', 'LIMA', 'LIMA', 'SANTA MARIA DEL MAR')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150139', 'LIMA', 'LIMA', 'SANTA ROSA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150140', 'LIMA', 'LIMA', 'SANTIAGO DE SURCO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150141', 'LIMA', 'LIMA', 'SURQUILLO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150142', 'LIMA', 'LIMA', 'VILLA EL SALVADOR')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150143', 'LIMA', 'LIMA', 'VILLA MARIA DEL TRIUNFO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150201', 'LIMA', 'BARRANCA', 'BARRANCA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150202', 'LIMA', 'BARRANCA', 'PARAMONGA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150203', 'LIMA', 'BARRANCA', 'PATIVILCA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150204', 'LIMA', 'BARRANCA', 'SUPE')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150205', 'LIMA', 'BARRANCA', 'SUPE PUERTO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150301', 'LIMA', 'CAJATAMBO', 'CAJATAMBO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150302', 'LIMA', 'CAJATAMBO', 'COPA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150303', 'LIMA', 'CAJATAMBO', 'GORGOR')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150304', 'LIMA', 'CAJATAMBO', 'HUANCAPON')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150305', 'LIMA', 'CAJATAMBO', 'MANAS')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150401', 'LIMA', 'CANTA', 'CANTA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150402', 'LIMA', 'CANTA', 'ARAHUAY')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150403', 'LIMA', 'CANTA', 'HUAMANTANGA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150404', 'LIMA', 'CANTA', 'HUAROS')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150405', 'LIMA', 'CANTA', 'LACHAQUI')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150406', 'LIMA', 'CANTA', 'SAN BUENAVENTURA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150407', 'LIMA', 'CANTA', 'SANTA ROSA DE QUIVES')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150501', 'LIMA', 'CAÑETE', 'SAN VICENTE DE CAÑETE')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150502', 'LIMA', 'CAÑETE', 'ASIA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150503', 'LIMA', 'CAÑETE', 'CALANGO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150504', 'LIMA', 'CAÑETE', 'CERRO AZUL')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150505', 'LIMA', 'CAÑETE', 'CHILCA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150506', 'LIMA', 'CAÑETE', 'COAYLLO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150507', 'LIMA', 'CAÑETE', 'IMPERIAL')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150508', 'LIMA', 'CAÑETE', 'LUNAHUANA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150509', 'LIMA', 'CAÑETE', 'MALA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150510', 'LIMA', 'CAÑETE', 'NUEVO IMPERIAL')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150511', 'LIMA', 'CAÑETE', 'PACARAN')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150512', 'LIMA', 'CAÑETE', 'QUILMANA')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150513', 'LIMA', 'CAÑETE', 'SAN ANTONIO')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150514', 'LIMA', 'CAÑETE', 'SAN LUIS')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150515', 'LIMA', 'CAÑETE', 'SANTA CRUZ DE FLORES')
    
    INTO UBIGEO (CODUBI, DEPAR, PROVI, DISTRI) VALUES ('150516', 'LIMA', 'CAÑETE', 'ZUÑIGA')
    
    SELECT * FROM DUAL
    
COMMIT;

-- Creamos la tabla CLIENTE

CREATE TABLE CLIENTE (

    IDCLI int  NOT NULL,
    
    NOMCOMCLI varchar2(100)  NOT NULL,
    
    APELLIDOCLI varchar2(100)  NOT NULL,
    
    DNICLI char(8)  NOT NULL,
    
    CORCLI varchar2(100)  NULL,
    
    CELCLI char(9)  NULL,
    
    CODUBI char(6)  NOT NULL,
    
    DIRCLI varchar2(100)  NOT NULL,
    
    ESTCLI char(1) DEFAULT 'A',
    
    CONSTRAINT CLIENTE_pk PRIMARY KEY (IDCLI)
    
) ;

-- Crear secuencia INCREMENTO INC_CLI

CREATE SEQUENCE INC_CLI

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_CLI

CREATE TRIGGER TRG_INC_CLI

       BEFORE INSERT ON CLIENTE
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_CLI.NEXTVAL INTO :NEW.IDCLI FROM DUAL;
	   
       END;

-- Ingresamos los registros a la tabla CLIENTE

INSERT ALL

    INTO CLIENTE (NOMCOMCLI, APELLIDOCLI, DNICLI, CORCLI, CELCLI, CODUBI, DIRCLI)
    
        VALUES ('JOSE ANTONIO','CAMPOS ZALAZAR', '87965465', 'JoseCampos123@hotmail.com', '989786787', '150501', 'Av. Mariscal Benavides 1534')
	
    INTO CLIENTE (NOMCOMCLI, APELLIDOCLI, DNICLI, CORCLI, CELCLI, CODUBI, DIRCLI)
    
        VALUES ('JACINTA BELINDA', 'ERLINDA CAMPOS', '87967856', 'JacintaCampos@hotmail.com', '989876543', '150501', 'Av. Mariscal Caceres 1524')
	
    INTO CLIENTE (NOMCOMCLI, APELLIDOCLI, DNICLI, CORCLI, CELCLI, CODUBI, DIRCLI)
    
        VALUES ('HERLINDA PAULA MANRIQUE QUISPE','MANRIQUE QUISPE', '76876897', 'HerlindaP@gmail.com', '900878987', '150506', 'Jr. Oggings 3421')
	
	
    INTO CLIENTE (NOMCOMCLI, APELLIDOCLI, DNICLI, CORCLI, CELCLI, CODUBI, DIRCLI)
    
        VALUES ('OMAR FELIPE', 'ARIAS MANCO', '89700009', 'AriasArias@outlook.com', '980786756', '150504', 'Calle Alfonso Ugarte 1234')
	
    SELECT * FROM DUAL
    
COMMIT;

-- Creamos la tabla EMPLEADO

CREATE TABLE EMPLEADO (

    IDEMP int  NOT NULL,
    
    NOMCOMEMP varchar(100)  NOT NULL,
    
    APELLIDOEMP varchar(100)  NOT NULL,
	
    DNIEMP char(8)  NOT NULL,
    
    COREMP varchar(100)  NULL,
    
    CELEMP char(9)  NULL,
    
    CODUBI char(6)  NOT NULL,
    
    DIREMP varchar(100)  NOT NULL,
    
    TURNO char(1)  NOT NULL,
    
    ESTEMP char(1) DEFAULT 'A',
    
    CONSTRAINT EMPLEADO_pk PRIMARY KEY  (IDEMP)

);

-- Crear secuencia INCREMENTO INC_EMP

CREATE SEQUENCE INC_EMP

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_EMP

CREATE TRIGGER TRG_INC_EMP

       BEFORE INSERT ON EMPLEADO
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_EMP.NEXTVAL INTO :NEW.IDEMP FROM DUAL;
	   
       END;

-- Ingresamos los registros a la tabla EMPLEADO

INSERT ALL

    INTO EMPLEADO (NOMCOMEMP, APELLIDOEMP, DNIEMP, COREMP, CELEMP, CODUBI, DIREMP, TURNO)
    
        VALUES ('CARLOS EDIDSON','SANCHEZ ALCALA', '73829932', 'CarlosS789789@hotmail.com', '965879417', '150504', 'Av. Alfonso Ugarte 1345', 'N')
	
    INTO EMPLEADO (NOMCOMEMP, APELLIDOEMP, DNIEMP, COREMP, CELEMP, CODUBI, DIREMP, TURNO)
    
        VALUES ('NAOMI SHANTAL','CAMA ELIAS', '73456734', 'NaomiCama566@hotmail.com', '987678564', '150507', 'Av. Malvinas 1237', 'T')
	
    INTO EMPLEADO (NOMCOMEMP, APELLIDOEMP, DNIEMP, COREMP, CELEMP, CODUBI, DIREMP, TURNO)
    
        VALUES ('HUGO MISHELL','MENESES INCA', '56784536', 'MenesesHugo@hotmail.com', '908765467', '150507', 'Asunción 8 1231', 'M')
	
    SELECT * FROM DUAL
    
COMMIT;

-- Creamos la tabla PLATILLO

CREATE TABLE PLATILLO (

    IDPLA int  NOT NULL,
    
    NOMPLA varchar2(50)  NOT NULL,
    
    DESPLA varchar2(300)  NOT NULL,
    
    PREPLA number(5,2)  NOT NULL,
    
    STOCKPLA int  NOT NULL,
    
    ESTPLA char(1) DEFAULT 'A',
    
    CONSTRAINT PLATILLO_pk PRIMARY KEY (IDPLA)
    
) ;

-- Crear secuencia INCREMENTO INC_PLA

CREATE SEQUENCE INC_PLA

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_PLA

CREATE TRIGGER TRG_INC_PLA

       BEFORE INSERT ON PLATILLO
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_PLA.NEXTVAL INTO :NEW.IDPLA FROM DUAL;
	   
       END;

-- Ingresamos los registros a la tabla PLATILLO

INSERT ALL

    INTO PLATILLO (NOMPLA, DESPLA, PREPLA, STOCKPLA)
    
        VALUES ('Arroz Chaufa', 'Este platillo contiene: Arroz, cebolla china, pollo o carne, hot dog, huevo, espagueti, cillao y pimiento.', '12,00', '30')
	
    INTO PLATILLO (NOMPLA, DESPLA, PREPLA, STOCKPLA)
    
        VALUES ('Carapulcra con Sopa Seca', 'Este platillo contiene: Papa seca, carne de chancho, cebolla, ajo, aji panca, aji amaraillo, sal y pimienta.', '15,00', '25')
	
    INTO PLATILLO (NOMPLA, DESPLA, PREPLA, STOCKPLA)
    
        VALUES ('Carapulcra', 'Este platillo contiene: Carne de chancho, cebolla, papa seca, ajo, caldo de pollo, sal y pimienta.', '9,00', '10')
	
    INTO PLATILLO (NOMPLA, DESPLA, PREPLA, STOCKPLA)
    
        VALUES ('Sopa Seca', 'Este platillo contiene: Espagueti,  caldo de pollo, cebolla, ajo molido, tomate, albahaca y  aceite vegetal.', '9,00', '10')
	
    INTO PLATILLO (NOMPLA, DESPLA, PREPLA, STOCKPLA)
    
        VALUES ('Cau Cau de Mondongo', 'Este platillo contiene: Mondongo, papa rosada, zanahoria, alverjas,  cebolla roja, ajo molido, aji amarillo y  hierbabuena.', '13,00', '20')
	
    SELECT * FROM DUAL
    
COMMIT;

-- Creamos la tabla PRODUCTO

CREATE TABLE PRODUCTO (

    IDPRO int  NOT NULL,
    
    NOMPRO varchar2(100)  NOT NULL,
    
    DESPRO varchar2(300)  NOT NULL,
    
    PREPRO number(5,2)  NOT NULL,
    
    ESTPRO char(1) DEFAULT 'A',
    
    CONSTRAINT PRODUCTO_pk PRIMARY KEY (IDPRO)
    
) ;

-- Crear secuencia INCREMENTO INC_PRO

CREATE SEQUENCE INC_PRO

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_PRO

CREATE TRIGGER TRG_INC_PRO

       BEFORE INSERT ON PRODUCTO
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_PRO.NEXTVAL INTO :NEW.IDPRO FROM DUAL;
	   
       END;

-- Ingresamos los registros a la tabla PRODUCTO

INSERT ALL

    INTO PRODUCTO (NOMPRO, DESPRO, PREPRO)
    
        VALUES ('Arroz', 'Arroz marca MARGARITA.', '10,00')
	
    INTO PRODUCTO (NOMPRO, DESPRO, PREPRO)
    
        VALUES ('Pollo', 'Pollo Fresco al instante.', '10,00')
	
    INTO PRODUCTO (NOMPRO, DESPRO, PREPRO)
    
        VALUES ('Papa Amarailla', 'Papa amarilla de alta calidad, consechada y cuidada', '10,00')
	
    INTO PRODUCTO (NOMPRO, DESPRO, PREPRO)
    
        VALUES ('Papa Rosada', 'Papa rosada de alta calidad, consechada y cuidada', '10,00')
	
    INTO PRODUCTO (NOMPRO, DESPRO, PREPRO)
    
        VALUES ('Pescado', 'Pescado fresco y de alta calidad maritima', '15,00')
	
    INTO PRODUCTO (NOMPRO, DESPRO, PREPRO)
    
        VALUES ('Carne de Cerdo', 'Carne no mas de dos dias de empaquetado', '10,00')
	
SELECT * FROM DUAL

COMMIT;

-- Creamos la tabla PROVEEDOR

CREATE TABLE PROVEEDOR (

    IDPROV int  NOT NULL,
    
    RAZSOCPROV varchar2(200)  NOT NULL,
    
    RUCPROV char(11)  NOT NULL,
    
    PROVEND varchar2(100)  NOT NULL,
    
    EMAIPROV varchar2(50)  NOT NULL,
    
    CELPROV char(9)  NOT NULL,
    
    CODUBI char(6)  NOT NULL,
    
    DIRPROV varchar2(100)  NOT NULL,
    
    ESTPROV char(1) DEFAULT 'A',
    
    CONSTRAINT PROVEEDOR_pk PRIMARY KEY (IDPROV)
    
) ;

-- Crear secuencia INCREMENTO INC_PROV

CREATE SEQUENCE INC_PROV

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_PROV

CREATE TRIGGER TRG_INC_PROV

       BEFORE INSERT ON PROVEEDOR
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_PROV.NEXTVAL INTO :NEW.IDPROV FROM DUAL;
	   
       END;

-- Ingresamos los registros a la tabla PROVEEDOR

INSERT ALL

    INTO PROVEEDOR (RAZSOCPROV, RUCPROV, PROVEND, EMAIPROV, CELPROV, CODUBI, DIRPROV)
    
        VALUES ('Proagro Peruanos', '20781362943', 'Papas', 'proagro.peruanos@gmail.com', '956219873', '150504', 'Calle Simon Bolivar 1233')
	
    INTO PROVEEDOR (RAZSOCPROV, RUCPROV, PROVEND, EMAIPROV, CELPROV, CODUBI, DIRPROV)
    
        VALUES ('Avícola Transavic', '20598462835', 'Pollos', 'avícolatransavic@gmail.com', '976183761', '150501', 'Av. Proceres 2345')
	
    INTO PROVEEDOR (RAZSOCPROV, RUCPROV, PROVEND, EMAIPROV, CELPROV, CODUBI, DIRPROV)
    
        VALUES ('Carniceria Fidelita', '20545872654', 'Carnes', 'carniceriafideli@gmail.com', '956219821', '150506', 'Jr. Villa Nueva 7856')
	
    INTO PROVEEDOR (RAZSOCPROV, RUCPROV, PROVEND, EMAIPROV, CELPROV, CODUBI, DIRPROV)
    
        VALUES ('Pescado Fresquito', '20479534208', 'Arroz', 'arrozelblanquito@gmail.com', '946753723', '150501', 'Sin Dirección Clara')
	
    INTO PROVEEDOR (RAZSOCPROV, RUCPROV, PROVEND, EMAIPROV, CELPROV, CODUBI, DIRPROV)
    
        VALUES ('Arroz el Blanquito', '20568713629', 'Pescado', 'pescadofresquito@gmail.com', '929127648', '150506', 'Calle Mariscal Hortencias 3435')
	
    SELECT * FROM DUAL
    
COMMIT;

-- Creamos la tabla VENTA

CREATE TABLE VENTA (

    IDVEN int  NOT NULL,
    
    FECVEN date  NOT NULL,
    
    IDEMP int  NOT NULL,
    
    IDCLI int  NOT NULL,
    
    ESTVEN char(1) DEFAULT 'A',
    
    CONSTRAINT VENTA_pk PRIMARY KEY (IDVEN)
    
) ;

-- Crear secuencia INCREMENTO INC_VEN

CREATE SEQUENCE INC_VEN

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_VEN

CREATE TRIGGER TRG_INC_VEN

       BEFORE INSERT ON VENTA
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_VEN.NEXTVAL INTO :NEW.IDVEN FROM DUAL;
	   
       END;

-- Creamos la tabla VENTA_DETALLE

CREATE TABLE VENTA_DETALLE (

    IDVENDET int  NOT NULL,
    
    IDVEN int  NOT NULL,
    
    CANTVEND int  NOT NULL,
    
    SUBTOTVEN decimal(10,2)  NOT NULL,
    
    IDPLA int  NOT NULL,
    
    CONSTRAINT VENTA_DETALLE_pk PRIMARY KEY (IDVENDET)
    
) ;

-- Crear secuencia INCREMENTO INC_VENDET

CREATE SEQUENCE INC_VENDET

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_VENDET

CREATE TRIGGER TRG_INC_VENDET

       BEFORE INSERT ON VENTA_DETALLE
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_VENDET.NEXTVAL INTO :NEW.IDVENDET FROM DUAL;
	   
       END;

-- Creamos la tabla COMPRA

CREATE TABLE COMPRA (

    IDCOM int  NOT NULL,
    
    FECCOM date  NOT NULL,
    
    IDEMP int  NOT NULL,
    
    IDPROV int  NOT NULL,
    
    ESTCOM char(1) DEFAULT 'A',
    
    CONSTRAINT COMPRA_pk PRIMARY KEY (IDCOM)
    
) ;

-- Crear secuencia INCREMENTO INC_COM

CREATE SEQUENCE INC_COM

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_COM

CREATE TRIGGER TRG_INC_COM

       BEFORE INSERT ON COMPRA
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_COM.NEXTVAL INTO :NEW.IDCOM FROM DUAL;
	   
       END;

-- Creamos la tabla COMPRA_DETALLE

CREATE TABLE COMPRA_DETALLE (

    IDCOMDET int  NOT NULL,
    
    IDCOM int  NOT NULL,
    
    CANTPRO int  NOT NULL,
    
    SUBTOTALCOMP decimal(5,2)  NOT NULL,
    
    IDPRO int  NOT NULL,
    
    CONSTRAINT COMPRA_DETALLE_pk PRIMARY KEY (IDCOMDET)
    
) ;

-- Crear secuencia INCREMENTO INC_COMDET

CREATE SEQUENCE INC_COMDET

       START WITH 1
       
       INCREMENT BY 1;
       
-- Crear disparador de auntoincrementable TRG_INC_COMDET

CREATE TRIGGER TRG_INC_COMDET

       BEFORE INSERT ON COMPRA_DETALLE
       
       FOR EACH ROW
       
       BEGIN
       
           SELECT INC_COMDET.NEXTVAL INTO :NEW.IDCOMDET FROM DUAL;
	   
       END;

-- Relación entre CLIENTE-UBIGEO

ALTER TABLE CLIENTE ADD CONSTRAINT CLIENTE_UBIGEO

    FOREIGN KEY (CODUBI)
    
    REFERENCES UBIGEO (CODUBI);

-- Relación entre COMPRA_DETALLE-COMPRA

ALTER TABLE COMPRA_DETALLE ADD CONSTRAINT COMPRA_DETALLE_COMPRA

    FOREIGN KEY (IDCOM)
    
    REFERENCES COMPRA (IDCOM);

-- Relación entre COMPRA_DETALLE-PRODUCTO

ALTER TABLE COMPRA_DETALLE ADD CONSTRAINT COMPRA_DETALLE_PRODUCTO

    FOREIGN KEY (IDPRO)
    
    REFERENCES PRODUCTO (IDPRO);

-- Relación entre COMPRA-EMPLEADO

ALTER TABLE COMPRA ADD CONSTRAINT COMPRA_EMPLEADO

    FOREIGN KEY (IDEMP)
    
    REFERENCES EMPLEADO (IDEMP);

-- Relación entre COMPRA-PROVEEDOR

ALTER TABLE COMPRA ADD CONSTRAINT COMPRA_PROVEEDOR

    FOREIGN KEY (IDPROV)
    
    REFERENCES PROVEEDOR (IDPROV);

-- Relación entre EMPLEADO-UBIGEO

ALTER TABLE EMPLEADO ADD CONSTRAINT EMPLEADO_UBIGEO

    FOREIGN KEY (CODUBI)
    
    REFERENCES UBIGEO (CODUBI);

-- Relación entre PROVEEDOR-UBIGEO

ALTER TABLE PROVEEDOR ADD CONSTRAINT PROVEEDOR_UBIGEO

    FOREIGN KEY (CODUBI)
    
    REFERENCES UBIGEO (CODUBI);

-- Relación entre VENTA-EMPLEADO

ALTER TABLE VENTA ADD CONSTRAINT VENTA_EMPLEADO

    FOREIGN KEY (IDEMP)
    
    REFERENCES EMPLEADO (IDEMP);

-- Relación entre VENTA-CLIENTE

ALTER TABLE VENTA ADD CONSTRAINT VENTA_CLIENTE

    FOREIGN KEY (IDCLI)
    
    REFERENCES CLIENTE (IDCLI);

-- Relación entre VENTA_DETALLE-PLATILLO

ALTER TABLE VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_PLATILLO

    FOREIGN KEY (IDPLA)
    
    REFERENCES PLATILLO (IDPLA);

-- Relación entre VENTA_DETALLE-VENTA

ALTER TABLE VENTA_DETALLE ADD CONSTRAINT VENTA_DETALLE_VENTA

    FOREIGN KEY (IDVEN)
    
    REFERENCES VENTA (IDVEN);
	
-- Creamos la vista de los datos de los Cliente

CREATE VIEW DatosClientes

AS

SELECT

IDCLI,

NOMCOMCLI,

APELLIDOCLI,

DNICLI,

CORCLI,

CELCLI,

C.CODUBI,

DEPAR,

PROVI,

DISTRI,

DIRCLI,

ESTCLI

FROM CLIENTE C INNER JOIN UBIGEO U

	ON C.CODUBI = U.CODUBI
	
;

-- Creamos la vista de los datos de los Empleados

CREATE VIEW DatosEmpleados

AS

SELECT

IDEMP,

NOMCOMEMP,

APELLIDOEMP,

DNIEMP,

COREMP,

CELEMP,

E.CODUBI,

DEPAR,

PROVI,

DISTRI,

DIREMP,

TURNO,

ESTEMP

FROM EMPLEADO E INNER JOIN UBIGEO U

	ON E.CODUBI = U.CODUBI
	
;
	
-- Creamos la vista de los datos de los Proveedores

CREATE VIEW DatosProveedor

AS

SELECT

IDPROV,

RAZSOCPROV,

RUCPROV,

PROVEND,

EMAIPROV,

CELPROV,

P.CODUBI,

DEPAR,

PROVI,

DISTRI,

DIRPROV,

ESTPROV

FROM PROVEEDOR P INNER JOIN UBIGEO U

	ON P.CODUBI = U.CODUBI
	
;
	
-- Creamos la vista de venta

CREATE VIEW DetalleCompletoVenta

AS

SELECT

V.IDVEN,

FECVEN,

V.IDEMP,

NOMCOMEMP,

APELLIDOEMP

DNIEMP,

V.IDCLI,

NOMCOMCLI,

APELLIDOCLI,

DNICLI,

VD.IDPLA,

NOMPLA,

CANTVEND,

SUBTOTVEN

FROM VENTA V INNER JOIN EMPLEADO E

	ON V.IDEMP = E.IDEMP
	
	INNER JOIN CLIENTE C
	
	ON V.IDCLI = C.IDCLI
	
	INNER JOIN VENTA_DETALLE VD
	
	ON  V.IDVEN =  VD.IDVEN
	
	INNER JOIN PLATILLO P
	
	ON VD.IDPLA = P.IDPLA
	
;
